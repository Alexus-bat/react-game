(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a,l,c,o=n(0),i=n.n(o),r=n(20),s=n.n(r),u=(n(26),n(16)),b=n(2),v={easy:{MAX_ROWS:9,MAX_COLS:9,NO_OF_BOMBS:10},medium:{MAX_ROWS:16,MAX_COLS:16,NO_OF_BOMBS:40},hard:{MAX_ROWS:16,MAX_COLS:30,NO_OF_BOMBS:99}},d=n(10),j=n.n(d),f=n(12),O=n(13),m=n(4),h=n(6),p=(n(28),n(1)),x=function(){var e=function(){var e=Object(o.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],l=Object(o.useState)(null),c=Object(h.a)(l,2),i=(c[0],c[1]);return{loading:n,request:Object(o.useCallback)(function(){var e=Object(f.a)(j.a.mark((function e(t){var n,l,c,o,r,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"GET",l=s.length>2&&void 0!==s[2]?s[2]:null,c=s.length>3&&void 0!==s[3]?s[3]:{},a(!0),e.prev=4,e.next=7,fetch(t,{method:n,body:l,headers:c});case 7:return o=e.sent,e.next=10,o.json();case 10:if(r=e.sent,o.ok){e.next=13;break}throw new Error(r.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 13:return a(!1),e.abrupt("return",r);case 17:throw e.prev=17,e.t0=e.catch(4),a(!1),i(e.t0.message),e.t0;case 22:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(t){return e.apply(this,arguments)}}(),[]),clearError:function(){return i(null)}}}(),t=e.loading,n=e.request,a=Object(o.useState)({email:"",password:""}),l=Object(h.a)(a,2),c=l[0],i=l[1],r=function(e){i(Object(m.a)(Object(m.a)({},c),{},Object(O.a)({},e.target.name,e.target.value)))},s=function(){var e=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("/api/auth/register","POST",Object(m.a)({},c));case 3:t=e.sent,console.log("Data",t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsx)("h1",{children:"\u0421\u0430\u043f\u0451\u0440"}),Object(p.jsxs)("div",{className:"card",children:[Object(p.jsxs)("div",{className:"card-content",children:[Object(p.jsx)("span",{className:"card-content__title",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"input-field",children:Object(p.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",id:"email",type:"text",name:"email",autoComplete:"off",onChange:r})}),Object(p.jsx)("div",{className:"input-field",children:Object(p.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",id:"password",type:"password",name:"password",onChange:r})})]})]}),Object(p.jsxs)("div",{className:"card-action",children:[Object(p.jsx)("button",{className:"btn",disabled:t,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(p.jsx)("button",{className:"btn",onClick:s,disabled:t,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})]})})},g=(n(30),function(e){var t=e.value;return Object(p.jsx)("div",{className:"NumberDisplay",children:t<0?"-".concat(Math.abs(t).toString().padStart(2,"0")):t.toString().padStart(3,"0")})});!function(e){e[e.none=0]="none",e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three",e[e.four=4]="four",e[e.five=5]="five",e[e.six=6]="six",e[e.seven=7]="seven",e[e.eight=8]="eight",e[e.bomb=9]="bomb"}(a||(a={})),function(e){e[e.open=0]="open",e[e.visible=1]="visible",e[e.flagged=2]="flagged"}(l||(l={})),function(e){e.smile="\ud83d\ude01",e.oh="\ud83d\ude2e",e.lost="\ud83d\ude35",e.won="\ud83d\ude0e"}(c||(c={}));var C=function(e,t,n,a,l){return{topLeftCell:t>0&&n>0?e[t-1][n-1]:null,topCell:t>0?e[t-1][n]:null,topRightCell:t>0&&n<a-1?e[t-1][n+1]:null,leftCell:n>0?e[t][n-1]:null,rightCell:n<a-1?e[t][n+1]:null,bottomLeftCell:t<l-1&&n>0?e[t+1][n-1]:null,bottomCell:t<l-1?e[t+1][n]:null,bottomRightCell:t<l-1&&n<a-1?e[t+1][n+1]:null}},S=function(e){for(var t=e.MAX_COLS,n=e.MAX_ROWS,c=e.NO_OF_BOMBS,o=[],i=0;i<n;i++){o.push([]);for(var r=0;r<t;r++)o[i].push({value:a.none,state:l.open})}for(var s=0,u=function(){var e=Math.floor(Math.random()*n),l=Math.floor(Math.random()*t);o[e][l].value!==a.bomb&&(o=o.map((function(t,n){return t.map((function(t,c){return e===n&&l===c?Object(m.a)(Object(m.a)({},t),{},{value:a.bomb}):t}))})),s++)};s<c;)u();for(var b=0;b<n;b++)for(var v=0;v<t;v++){var d=o[b][v];if(d.value!==a.bomb){var j=0,f=C(o,b,v,t,n),O=f.topLeftCell,h=f.topCell,p=f.topRightCell,x=f.leftCell,g=f.rightCell,S=f.bottomLeftCell,w=f.bottomCell,M=f.bottomRightCell;(null===O||void 0===O?void 0:O.value)===a.bomb&&j++,(null===h||void 0===h?void 0:h.value)===a.bomb&&j++,(null===p||void 0===p?void 0:p.value)===a.bomb&&j++,(null===x||void 0===x?void 0:x.value)===a.bomb&&j++,(null===g||void 0===g?void 0:g.value)===a.bomb&&j++,(null===S||void 0===S?void 0:S.value)===a.bomb&&j++,(null===w||void 0===w?void 0:w.value)===a.bomb&&j++,(null===M||void 0===M?void 0:M.value)===a.bomb&&j++,j>0&&(o[b][v]=Object(m.a)(Object(m.a)({},d),{},{value:j}))}}return o},w=function e(t,n,c,o,i){var r=t[n][c];if(r.state===l.visible||r.state===l.flagged)return t;var s=t.slice();s[n][c].state=l.visible;var u=C(t,n,c,o,i),b=u.topLeftCell,v=u.topCell,d=u.topRightCell,j=u.leftCell,f=u.rightCell,O=u.bottomLeftCell,m=u.bottomCell,h=u.bottomRightCell;return(null===b||void 0===b?void 0:b.state)===l.open&&b.value!==a.bomb&&(b.value===a.none?s=e(s,n-1,c-1,o,i):s[n-1][c-1].state=l.visible),(null===v||void 0===v?void 0:v.state)===l.open&&v.value!==a.bomb&&(v.value===a.none?s=e(s,n-1,c,o,i):s[n-1][c].state=l.visible),(null===d||void 0===d?void 0:d.state)===l.open&&d.value!==a.bomb&&(d.value===a.none?s=e(s,n-1,c+1,o,i):s[n-1][c+1].state=l.visible),(null===j||void 0===j?void 0:j.state)===l.open&&j.value!==a.bomb&&(j.value===a.none?s=e(s,n,c-1,o,i):s[n][c-1].state=l.visible),(null===f||void 0===f?void 0:f.state)===l.open&&f.value!==a.bomb&&(f.value===a.none?s=e(s,n,c+1,o,i):s[n][c+1].state=l.visible),(null===O||void 0===O?void 0:O.state)===l.open&&O.value!==a.bomb&&(O.value===a.none?s=e(s,n+1,c-1,o,i):s[n+1][c-1].state=l.visible),(null===m||void 0===m?void 0:m.state)===l.open&&m.value!==a.bomb&&(m.value===a.none?s=e(s,n+1,c,o,i):s[n+1][c].state=l.visible),(null===h||void 0===h?void 0:h.state)===l.open&&h.value!==a.bomb&&(h.value===a.none?s=e(s,n+1,c+1,o,i):s[n+1][c+1].state=l.visible),s},M=(n(31),function(e){var t=e.row,n=e.col,c=e.onContext,o=e.onClick,i=e.state,r=e.value,s=e.red;return Object(p.jsx)("div",{className:"Button ".concat(i===l.visible?"visible":""," value-").concat(r," ").concat(s?"red":""),onClick:o(t,n),onContextMenu:c(t,n),children:i===l.visible?r===a.bomb?Object(p.jsx)("span",{role:"img","aria-label":"bomb",children:"\ud83d\udca3"}):r===a.none?null:r:i===l.flagged?Object(p.jsx)("span",{role:"img","aria-label":"flag",children:"\ud83d\udea9"}):null})}),N=(n(32),function(e){var t=e.config,n=t.MAX_COLS,i=t.MAX_ROWS,r=t.NO_OF_BOMBS,s=Object(o.useState)(S(t)),u=Object(h.a)(s,2),b=u[0],v=u[1],d=Object(o.useState)(c.smile),j=Object(h.a)(d,2),f=j[0],O=j[1],x=Object(o.useState)(0),C=Object(h.a)(x,2),N=C[0],_=C[1],k=Object(o.useState)(!1),L=Object(h.a)(k,2),y=L[0],B=L[1],E=Object(o.useState)(r),R=Object(h.a)(E,2),A=R[0],X=R[1],F=Object(o.useState)(!1),W=Object(h.a)(F,2),T=W[0],D=W[1],I=Object(o.useState)(!1),q=Object(h.a)(I,2),J=q[0],P=q[1];Object(o.useEffect)((function(){var e=function(){O(c.oh)},t=function(){O(c.smile)};return window.addEventListener("mousedown",e),window.addEventListener("mouseup",t),function(){window.removeEventListener("mousedown",e),window.removeEventListener("mouseup",t)}}),[]),Object(o.useEffect)((function(){if(y&&N<999){var e=setInterval((function(){_(N+1)}),1e3);return function(){clearInterval(e)}}}),[y,N]),Object(o.useEffect)((function(){T&&(B(!1),O(c.lost))}),[T]),Object(o.useEffect)((function(){J&&(B(!1),O(c.won))}),[J]);var G=function(e,c){return function(){if(!T){var o=b.slice();if(!y){for(var r=o[e][c].value===a.bomb;r;)if((o=S(t))[e][c].value!==a.bomb){r=!1;break}B(!0)}var s=o[e][c];if(![l.flagged,l.visible].includes(s.state)){if(s.value===a.bomb)return D(!0),o[e][c].red=!0,o=z(),void v(o);s.value===a.none?o=w(o,e,c,n,i):o[e][c].state=l.visible;for(var u=!1,d=0;d<i;d++)for(var j=0;j<n;j++){var f=o[d][j];if(f.value!==a.bomb&&f.state===l.open){u=!0;break}}u||(o=o.map((function(e){return e.map((function(e){return e.value===a.bomb?Object(m.a)(Object(m.a)({},e),{},{state:l.flagged}):e}))})),P(!0)),v(o)}}}},H=function(e,t){return function(n){if(n.preventDefault(),y){var a=b.slice(),c=b[e][t];c.state!==l.visible&&(c.state===l.open?(a[e][t].state=l.flagged,v(a),X(A-1)):c.state===l.flagged&&(a[e][t].state=l.open,v(a),X(A+1)))}}},z=function(){return b.slice().map((function(e){return e.map((function(e){return e.value===a.bomb?Object(m.a)(Object(m.a)({},e),{},{state:l.visible}):e}))}))};return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)("div",{className:"Header",children:[Object(p.jsx)(g,{value:A}),Object(p.jsx)("div",{className:"Face",onClick:function(){B(!1),_(0),v(S(t)),D(!1),P(!1),X(r)},children:Object(p.jsx)("span",{role:"img","aria-label":"face",children:f})}),Object(p.jsx)(g,{value:N})]}),Object(p.jsx)("div",{className:"Body",style:{gridTemplateColumns:"repeat(".concat(n,", 1fr)"),gridTemplateRows:"repeat(".concat(i,", 1fr)")},children:b.map((function(e,t){return e.map((function(e,n){return Object(p.jsx)(M,{state:e.state,value:e.value,onClick:G,onContext:H,red:e.red,row:t,col:n},"".concat(t," - ").concat(n))}))}))})]})}),_=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("h1",{children:"ScorePage"})})},k=function(){var e=!0?Object(p.jsxs)(b.d,{children:[Object(p.jsx)(b.b,{path:"/game/easy",exact:!0,children:Object(p.jsx)(N,{config:v.easy})}),Object(p.jsx)(b.b,{path:"/game/medium",exact:!0,children:Object(p.jsx)(N,{config:v.medium})}),Object(p.jsx)(b.b,{path:"/game/hard",exact:!0,children:Object(p.jsx)(N,{config:v.hard})}),Object(p.jsx)(b.b,{path:"/score",exact:!0,children:Object(p.jsx)(_,{})})]}):Object(p.jsxs)(b.d,{children:[Object(p.jsx)(b.b,{path:"/",exact:!0,children:Object(p.jsx)(x,{})}),Object(p.jsx)(b.a,{to:"/"})]});return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(u.a,{children:[Object(p.jsx)("nav",{className:"nav",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)("a",{href:"/game/easy",children:"\u041b\u0435\u0433\u043a\u043e"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{href:"/game/medium",children:"\u0421\u0440\u0435\u0434\u043d\u0435"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{href:"/game/hard",children:"\u0421\u043b\u043e\u0436\u043d\u043e"})})]})}),Object(p.jsx)("div",{children:e})]})})};s.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(k,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.51962a10.chunk.js.map