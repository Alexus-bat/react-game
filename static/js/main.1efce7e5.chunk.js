(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/click.0920fcb3.mp3"},26:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/lost.4d1ccb21.mp3"},27:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/win.3d559ecb.mp3"},28:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a,l,i,c=n(0),o=n(12),s=n.n(o),r=(n(20),n(4)),b=n(2),u=n(6),d=(n(21),n(1)),m=function(e){var t=e.value;return Object(d.jsx)("div",{className:"NumberDisplay",children:t<0?"-".concat(Math.abs(t).toString().padStart(2,"0")):t.toString().padStart(3,"0")})};!function(e){e[e.none=0]="none",e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three",e[e.four=4]="four",e[e.five=5]="five",e[e.six=6]="six",e[e.seven=7]="seven",e[e.eight=8]="eight",e[e.bomb=9]="bomb"}(a||(a={})),function(e){e[e.open=0]="open",e[e.visible=1]="visible",e[e.flagged=2]="flagged"}(l||(l={})),function(e){e.smile="\ud83d\ude01",e.oh="\ud83d\ude2e",e.lost="\ud83d\ude35",e.won="\ud83d\ude0e"}(i||(i={}));var v=function(e,t,n,a,l){return{topLeftCell:t>0&&n>0?e[t-1][n-1]:null,topCell:t>0?e[t-1][n]:null,topRightCell:t>0&&n<a-1?e[t-1][n+1]:null,leftCell:n>0?e[t][n-1]:null,rightCell:n<a-1?e[t][n+1]:null,bottomLeftCell:t<l-1&&n>0?e[t+1][n-1]:null,bottomCell:t<l-1?e[t+1][n]:null,bottomRightCell:t<l-1&&n<a-1?e[t+1][n+1]:null}},j=function(e){for(var t=e.MAX_COLS,n=e.MAX_ROWS,i=e.NO_OF_BOMBS,c=[],o=0;o<n;o++){c.push([]);for(var s=0;s<t;s++)c[o].push({value:a.none,state:l.open})}for(var b=0,u=function(){var e=Math.floor(Math.random()*n),l=Math.floor(Math.random()*t);c[e][l].value!==a.bomb&&(c=c.map((function(t,n){return t.map((function(t,i){return e===n&&l===i?Object(r.a)(Object(r.a)({},t),{},{value:a.bomb}):t}))})),b++)};b<i;)u();for(var d=0;d<n;d++)for(var m=0;m<t;m++){var j=c[d][m];if(j.value!==a.bomb){var O=0,f=v(c,d,m,t,n),h=f.topLeftCell,p=f.topCell,g=f.topRightCell,x=f.leftCell,C=f.rightCell,S=f.bottomLeftCell,_=f.bottomCell,N=f.bottomRightCell;(null===h||void 0===h?void 0:h.value)===a.bomb&&O++,(null===p||void 0===p?void 0:p.value)===a.bomb&&O++,(null===g||void 0===g?void 0:g.value)===a.bomb&&O++,(null===x||void 0===x?void 0:x.value)===a.bomb&&O++,(null===C||void 0===C?void 0:C.value)===a.bomb&&O++,(null===S||void 0===S?void 0:S.value)===a.bomb&&O++,(null===_||void 0===_?void 0:_.value)===a.bomb&&O++,(null===N||void 0===N?void 0:N.value)===a.bomb&&O++,O>0&&(c[d][m]=Object(r.a)(Object(r.a)({},j),{},{value:O}))}}return c},O=function e(t,n,i,c,o){var s=t[n][i];if(s.state===l.visible||s.state===l.flagged)return t;var r=t.slice();r[n][i].state=l.visible;var b=v(t,n,i,c,o),u=b.topLeftCell,d=b.topCell,m=b.topRightCell,j=b.leftCell,O=b.rightCell,f=b.bottomLeftCell,h=b.bottomCell,p=b.bottomRightCell;return(null===u||void 0===u?void 0:u.state)===l.open&&u.value!==a.bomb&&(u.value===a.none?r=e(r,n-1,i-1,c,o):r[n-1][i-1].state=l.visible),(null===d||void 0===d?void 0:d.state)===l.open&&d.value!==a.bomb&&(d.value===a.none?r=e(r,n-1,i,c,o):r[n-1][i].state=l.visible),(null===m||void 0===m?void 0:m.state)===l.open&&m.value!==a.bomb&&(m.value===a.none?r=e(r,n-1,i+1,c,o):r[n-1][i+1].state=l.visible),(null===j||void 0===j?void 0:j.state)===l.open&&j.value!==a.bomb&&(j.value===a.none?r=e(r,n,i-1,c,o):r[n][i-1].state=l.visible),(null===O||void 0===O?void 0:O.state)===l.open&&O.value!==a.bomb&&(O.value===a.none?r=e(r,n,i+1,c,o):r[n][i+1].state=l.visible),(null===f||void 0===f?void 0:f.state)===l.open&&f.value!==a.bomb&&(f.value===a.none?r=e(r,n+1,i-1,c,o):r[n+1][i-1].state=l.visible),(null===h||void 0===h?void 0:h.state)===l.open&&h.value!==a.bomb&&(h.value===a.none?r=e(r,n+1,i,c,o):r[n+1][i].state=l.visible),(null===p||void 0===p?void 0:p.state)===l.open&&p.value!==a.bomb&&(p.value===a.none?r=e(r,n+1,i+1,c,o):r[n+1][i+1].state=l.visible),r},f=(n(23),function(e){var t=e.row,n=e.col,i=e.onContext,c=e.onClick,o=e.state,s=e.value,r=e.red;return Object(d.jsx)("div",{className:"Button ".concat(o===l.visible?"visible":""," value-").concat(s," ").concat(r?"red":""),onClick:c(t,n),onContextMenu:i(t,n),children:o===l.visible?s===a.bomb?Object(d.jsx)("span",{role:"img","aria-label":"bomb",children:"\ud83d\udca3"}):s===a.none?null:s:o===l.flagged?Object(d.jsx)("span",{role:"img","aria-label":"flag",children:"\ud83d\udea9"}):null})}),h=(n(24),function(e,t){localStorage.setItem(e,JSON.stringify(t))}),p=function(e){return JSON.parse(window.localStorage.getItem(e))},g=function(e){localStorage.removeItem(e)},x={easy:{MAX_ROWS:9,MAX_COLS:9,NO_OF_BOMBS:10},medium:{MAX_ROWS:16,MAX_COLS:16,NO_OF_BOMBS:40},hard:{MAX_ROWS:16,MAX_COLS:30,NO_OF_BOMBS:99}},C=function(e){var t=e.score;return Object(d.jsxs)("div",{className:"ModalScore",children:[Object(d.jsxs)("div",{className:"title",children:["\u041b\u0435\u0433\u043a\u043e:",Object(d.jsx)("span",{children:"\u041f\u043e\u0431\u0435\u0434 ".concat(t.easy.countWin)}),Object(d.jsx)("span",{children:"\u041b\u0443\u0447\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f ".concat(null===t.easy.bestTime?"-":t.easy.bestTime," \u0441\u0435\u043a")})]}),Object(d.jsxs)("div",{className:"title",children:["\u0421\u0440\u0435\u0434\u043d\u0435:",Object(d.jsx)("span",{children:"\u041f\u043e\u0431\u0435\u0434 ".concat(t.medium.countWin)}),Object(d.jsx)("span",{children:"\u041b\u0443\u0447\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f ".concat(null===t.medium.bestTime?"-":t.medium.bestTime," \u0441\u0435\u043a")})]}),Object(d.jsxs)("div",{className:"title",children:["\u0421\u043b\u043e\u0436\u043d\u043e:",Object(d.jsx)("span",{children:"\u041f\u043e\u0431\u0435\u0434 ".concat(t.hard.countWin)}),Object(d.jsx)("span",{children:"\u041b\u0443\u0447\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f ".concat(null===t.hard.bestTime?"-":t.hard.bestTime," \u0441\u0435\u043a")})]})]})},S=n(25),_=n(26),N=n(27),y={easy:{countWin:0,bestTime:null},medium:{countWin:0,bestTime:null},hard:{countWin:0,bestTime:null}},M=function(){var e=Object(u.a)(S),t=Object(b.a)(e,1)[0],n=Object(u.a)(_),o=Object(b.a)(n,1)[0],s=Object(u.a)(N),v=Object(b.a)(s,1)[0],M=Object(c.useState)(p("config")||x.easy),w=Object(b.a)(M,2),k=w[0],B=w[1],T=Object(c.useState)(p("key")||"easy"),A=Object(b.a)(T,2),L=A[0],W=A[1],F=Object(c.useState)(p("cells")||j(k)),R=Object(b.a)(F,2),X=R[0],E=R[1],I=Object(c.useState)(i.smile),J=Object(b.a)(I,2),D=J[0],H=J[1],q=Object(c.useState)(p("time")||0),z=Object(b.a)(q,2),G=z[0],K=z[1],P=Object(c.useState)(!1),Q=Object(b.a)(P,2),U=Q[0],V=Q[1],Y=Object(c.useState)(p("bomb")||k.NO_OF_BOMBS),Z=Object(b.a)(Y,2),$=Z[0],ee=Z[1],te=Object(c.useState)(!1),ne=Object(b.a)(te,2),ae=ne[0],le=ne[1],ie=Object(c.useState)(!1),ce=Object(b.a)(ie,2),oe=ce[0],se=ce[1],re=Object(c.useState)(!1),be=Object(b.a)(re,2),ue=be[0],de=be[1],me=Object(c.useState)(!1),ve=Object(b.a)(me,2),je=ve[0],Oe=ve[1],fe=Object(c.useState)(!1),he=Object(b.a)(fe,2),pe=he[0],ge=he[1],xe=Object(c.useState)(p("score")||y),Ce=Object(b.a)(xe,2),Se=Ce[0],_e=Ce[1];Object(c.useEffect)((function(){U&&(h("cells",X),h("key",L),h("time",G),h("bomb",$),h("config",k))}),[G,X,$]),Object(c.useEffect)((function(){var e=function(){H(i.oh)},t=function(){H(i.smile)};return window.addEventListener("mousedown",e),window.addEventListener("mouseup",t),function(){window.removeEventListener("mousedown",e),window.removeEventListener("mouseup",t)}}),[]),Object(c.useEffect)((function(){if(U&&G<999){var e=setInterval((function(){K(G+1)}),1e3);return function(){clearInterval(e)}}}),[U,G]),Object(c.useEffect)((function(){ae&&(Oe(!0),o(),V(!1),H(i.lost),g("cells"),g("time"),g("bomb"),g("config"),g("key"))}),[ae]),Object(c.useEffect)((function(){oe&&(de(!0),v(),V(!1),H(i.won),"easy"===L&&(Se.easy.countWin++,(!Se.easy.bestTime||G<Se.easy.bestTime)&&(Se.easy.bestTime=G),_e(Se),h("score",Se)),"medium"===L&&(Se.medium.countWin++,(!Se.medium.bestTime||G<Se.medium.bestTime)&&(Se.medium.bestTime=G),_e(Se),h("score",Se)),"hard"===L&&(Se.hard.countWin++,(!Se.hard.bestTime||G<Se.hard.bestTime)&&(Se.hard.bestTime=G),_e(Se),h("score",Se)))}),[oe]);var Ne=function(e,n){return function(i){if(t(),i.preventDefault(),!ae){var c=X.slice();if(!U){for(var o=c[e][n].value===a.bomb;o;)if((c=j(k))[e][n].value!==a.bomb){o=!1;break}V(!0)}var s=c[e][n];if(![l.flagged,l.visible].includes(s.state)){if(s.value===a.bomb)return le(!0),c[e][n].red=!0,c=Me(),void E(c);s.value===a.none?c=O(c,e,n,k.MAX_COLS,k.MAX_ROWS):c[e][n].state=l.visible;for(var b=!1,u=0;u<k.MAX_ROWS;u++)for(var d=0;d<k.MAX_COLS;d++){var m=c[u][d];if(m.value!==a.bomb&&m.state===l.open){b=!0;break}}b||(c=c.map((function(e){return e.map((function(e){return e.value===a.bomb?Object(r.a)(Object(r.a)({},e),{},{state:l.flagged}):e}))})),se(!0)),E(c)}}}},ye=function(e,n){return function(a){if(a.preventDefault(),U){t();var i=X.slice(),c=X[e][n];c.state!==l.visible&&(c.state===l.open?(i[e][n].state=l.flagged,E(i),ee($-1)):c.state===l.flagged&&(i[e][n].state=l.open,E(i),ee($+1)))}}},Me=function(){return X.slice().map((function(e){return e.map((function(e){return e.value===a.bomb?Object(r.a)(Object(r.a)({},e),{},{state:l.visible}):e}))}))},we=function(e){switch(Oe(!1),de(!1),t(),V(!1),K(0),g("cells"),g("time"),g("bomb"),e){case"easy":B(x.easy),E(j(x.easy)),ee(x.easy.NO_OF_BOMBS),W("easy");break;case"medium":B(x.medium),E(j(x.medium)),ee(x.medium.NO_OF_BOMBS),W("medium");break;case"hard":B(x.hard),E(j(x.hard)),ee(x.hard.NO_OF_BOMBS),W("hard")}};return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("button",{className:"btn",onClick:function(){ge(!pe)},children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),pe&&Object(d.jsx)(C,{score:Se}),Object(d.jsxs)("div",{className:"Header",children:[Object(d.jsx)(m,{value:$}),Object(d.jsx)("div",{className:"Face",onClick:function(){Oe(!1),de(!1),t(),V(!1),K(0),E(j(k)),le(!1),se(!1),ee(k.NO_OF_BOMBS)},children:Object(d.jsx)("span",{role:"img","aria-label":"face",children:D})}),Object(d.jsx)(m,{value:G})]}),Object(d.jsx)("div",{className:"Body",style:{gridTemplateColumns:"repeat(".concat(k.MAX_COLS,", 1fr)"),gridTemplateRows:"repeat(".concat(k.MAX_ROWS,", 1fr)")},children:X.map((function(e,t){return e.map((function(e,n){return Object(d.jsx)(f,{state:e.state,value:e.value,onClick:Ne,onContext:ye,red:e.red,row:t,col:n},"".concat(t," - ").concat(n))}))}))}),Object(d.jsxs)("div",{className:"App__footer",children:[Object(d.jsx)("div",{className:"btn-lvl ".concat("easy"===L&&"active"),onClick:we.bind(null,"easy"),children:"\u043b\u0435\u0433\u043a\u043e"}),Object(d.jsx)("div",{className:"btn-lvl ".concat("medium"===L&&"active"),onClick:we.bind(null,"medium"),children:"\u0441\u0440\u0435\u0434\u043d\u0435"}),Object(d.jsx)("div",{className:"btn-lvl ".concat("hard"===L&&"active"),onClick:we.bind(null,"hard"),children:"\u0441\u043b\u043e\u0436\u043d\u043e"})]}),ue&&Object(d.jsxs)("div",{className:"win-title",children:[Object(d.jsx)("span",{children:"Win!!!"}),Object(d.jsx)("span",{children:"Click on Face to play more"})]}),je&&Object(d.jsxs)("div",{className:"lost-title",children:[Object(d.jsx)("span",{children:"Loss(("}),Object(d.jsx)("span",{children:"Click on Face to try again"})]})]})},w=(n(28),function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("footer",{className:"footer",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("a",{className:"footer-logo",href:"https://rs.school/js/",rel:"noreferrer",target:"_blank"}),"\xa9 2021 ",Object(d.jsx)("a",{href:"https://github.com/Alexus-bat",rel:"noreferrer",target:"_blank",children:"Created by @Alexus-bat"})]})})})})}),k=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(M,{}),Object(d.jsx)(w,{})]})},B=n(14);s.a.render(Object(d.jsx)(B.a,{children:Object(d.jsx)(k,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.1efce7e5.chunk.js.map